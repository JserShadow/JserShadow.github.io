<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    My Blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="Coder Shadow" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/back.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">Shadow</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">归档</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="/archives/2018/06/">June 2018</a></li><li><a class="archive-link" href="/archives/2018/05/">May 2018</a></li><li><a class="archive-link" href="/archives/2018/04/">April 2018</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/JserShadow" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(data:image/jpeg;base64,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);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >数据导入导出与下载</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="方案一-纯前端实现"><a href="#方案一-纯前端实现" class="headerlink" title="方案一: 纯前端实现"></a>方案一: 纯前端实现</h1><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>首先需要传入文件,在GitHub找到了一个基于Vue的文件上传组件<code>vue-filepond</code>,选择这个组件有两个原因:<br>1.支持在前端解析数据<br>2.动画效果挺好看<br>具体的使用方法可以参考下面的链接<br><a href="https://pqina.nl/filepond/docs/patterns/frameworks/vue/" target="_blank" rel="noopener">vue-filepond</a><br>后来甲方大大说想要按钮式的文件上传，然而上面的组件并不能改成按钮，所以改用了<code>iview</code>的upload组件<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Upload</span></span></span><br><span class="line"><span class="tag"> <span class="attr">action</span>=<span class="string">"//jsonplaceholder.typicode.com/posts/"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">:before-upload</span>=<span class="string">"handleUpload"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">"ghost"</span> <span class="attr">icon</span>=<span class="string">"ios-cloud-upload-outline"</span>&gt;</span>Upload files<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Upload</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>action属性的值为后端接受文件流的接口router，即使想要前端解析文件也要写上这个属性，否则会报错<br><code>before-upload</code>接受一个方法，如果这个方法返回值为false,则会阻止Upload组件把文件传到action中的接口，我们就利用这个特性实现前端解析文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleUpload</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">const</span> ext = file.name.split(<span class="string">'.'</span>).pop();</span><br><span class="line">  <span class="keyword">if</span> (ext !== <span class="string">'xlsx'</span> &amp;&amp; ext !== <span class="string">'xls'</span> &amp;&amp; ext !== <span class="string">'csv'</span>) &#123;</span><br><span class="line">    _this.$Message.error(&#123;</span><br><span class="line">      content: <span class="string">'文件格式有误，请检查后再上传'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    _this.batchInitModel = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">  <span class="comment">//开始读取文件</span></span><br><span class="line">  reader.onload = <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">    <span class="comment">// pre-process data</span></span><br><span class="line">    <span class="keyword">let</span> binary = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(e.target.result);</span><br><span class="line">    <span class="keyword">const</span> length = bytes.byteLength;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">      binary += <span class="built_in">String</span>.fromCharCode(bytes[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* read workbook */</span></span><br><span class="line">    <span class="keyword">const</span> wb = XLSX.read(binary, &#123;<span class="attr">type</span>: <span class="string">'binary'</span>&#125;);</span><br><span class="line">    <span class="comment">/* grab first sheet */</span></span><br><span class="line">    <span class="keyword">const</span> wsname = wb.SheetNames[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> ws = wb.Sheets[wsname];</span><br><span class="line">    <span class="built_in">console</span>.log(ws);</span><br><span class="line">    <span class="keyword">if</span> (ws.A1.h !== <span class="string">'问题'</span> || ws.B1.h !== <span class="string">'答案'</span> || ws.C1.h !== <span class="string">'分享状态'</span> || ws.D1.h !== <span class="string">'规则类型'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$Message.error(&#123;</span><br><span class="line">        content: <span class="string">'文件键值有误，请检查后再上传'</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      _this.batchInitModel = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> rows = XLSX.utils.sheet_to_json(ws);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> record <span class="keyword">of</span> rows) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> record) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'问题'</span>: <span class="keyword">this</span>.rule.match = record[key]; <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'答案'</span>: <span class="keyword">this</span>.rule.response = record[key].split(<span class="string">';'</span>); <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'分享状态'</span>: <span class="keyword">this</span>.rule.share_state = record[key]; <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'规则类型'</span>: <span class="keyword">this</span>.rule.type = record[key]; <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">await</span> <span class="keyword">this</span>.addCorpus();</span><br><span class="line">    &#125;</span><br><span class="line">    _this.batchInitModel = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    reader.readAsArrayBuffer(file);</span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>解析数据方法的基本思路：先通过<code>FileReader</code>对象读取到用户传入文件的数据，这时的数据是ArrayBuffer,然后把这个ArrayBuffer转换成<code>Unit8Array</code>这样就可以使用<code>XLSX</code>来读取表格里的数据并作进一步处理。</p>
<h1 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">JSONToCSVConvertor</span>(<span class="params">JSONData, ShowLabel</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//If JSONData is not an object then JSON.parse will parse the JSON string in an Object</span></span><br><span class="line">  <span class="keyword">var</span> arrData = <span class="keyword">typeof</span> JSONData != <span class="string">'object'</span> ? <span class="built_in">JSON</span>.parse(JSONData) : JSONData;</span><br><span class="line">  <span class="keyword">var</span> CSV = <span class="string">''</span>;</span><br><span class="line">  <span class="comment">//Set Report title in first row or line</span></span><br><span class="line">  <span class="comment">// CSV += ReportTitle + '\n\n';</span></span><br><span class="line">  <span class="comment">//This condition will generate the Label/Header</span></span><br><span class="line">  <span class="keyword">if</span> (ShowLabel) &#123;</span><br><span class="line">      <span class="keyword">var</span> row = <span class="string">""</span>;</span><br><span class="line">      <span class="comment">//This loop will extract the label from 1st index of on array</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> arrData[<span class="number">0</span>]) &#123;</span><br><span class="line">          <span class="comment">//Now convert each value to string and comma-seprated</span></span><br><span class="line">          row += index + <span class="string">','</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      row = row.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">      <span class="comment">//append Label row with line break</span></span><br><span class="line">      CSV += row + <span class="built_in">escape</span>(<span class="string">'\n'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//1st loop is to extract each row</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrData.length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> row = <span class="string">""</span>;</span><br><span class="line">      <span class="comment">//2nd loop will extract each column and convert it in string comma-seprated</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> arrData[i]) &#123;</span><br><span class="line">          row += <span class="string">'"'</span> + arrData[i][index] + <span class="string">'",'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      row = row.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">      <span class="comment">//add a line break after each row</span></span><br><span class="line">      CSV += row + <span class="built_in">escape</span>(<span class="string">'\n'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (CSV == <span class="string">''</span>) &#123;        </span><br><span class="line">      alert(<span class="string">"Invalid data"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//Generate a file name</span></span><br><span class="line">  <span class="keyword">var</span> fileName = <span class="string">""</span>;</span><br><span class="line">  <span class="comment">//this will remove the blank-spaces from the title and replace it with an underscore</span></span><br><span class="line">  fileName += ReportTitle.replace(<span class="regexp">/ /g</span>,<span class="string">"_"</span>);</span><br><span class="line">  <span class="comment">//Initialize file format you want csv or xls</span></span><br><span class="line">  <span class="keyword">var</span> uri = <span class="string">'data:text/csv;charset=utf-8,'</span> + <span class="string">'\ufeff'</span> + CSV;</span><br><span class="line">  <span class="comment">// Now the little tricky part.</span></span><br><span class="line">  <span class="comment">// you can use either&gt;&gt; window.open(uri);</span></span><br><span class="line">  <span class="comment">// but this will not work in some browsers</span></span><br><span class="line">  <span class="comment">// or you will not get the correct file extension</span></span><br><span class="line">  <span class="comment">//this trick will generate a temp &lt;a /&gt; tag</span></span><br><span class="line">  <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">  link.href = uri;</span><br><span class="line">  <span class="comment">//set the visibility hidden so it will not effect on your web-layout</span></span><br><span class="line">  link.style = <span class="string">"visibility:hidden"</span>;</span><br><span class="line">  link.download = fileName + <span class="string">".csv"</span>;</span><br><span class="line">  <span class="comment">//this part will append the anchor tag and remove it after automatic click</span></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(link);</span><br><span class="line">  link.click();</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(link);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前端下载的基本思路: 先把Json数据拼接成CSV数据并加上<code>&#39;data:text/csv;charset=utf-8,&#39; + &#39;\ufeff&#39;</code>头，再创建一个看不见的a标签，用js控制点一下再把这个a标签卸载</p>
<blockquote>
<p>这种下载方法虽然简单但是经测试，IE浏览器无法使用这种方法</p>
</blockquote>
<h1 id="前后端结合实现"><a href="#前后端结合实现" class="headerlink" title="前后端结合实现"></a>前后端结合实现</h1><p>由于上面的方法无法适配IE浏览器，但是分析数据的方法用起来是没问题的，所以我们只需要把上面<code>JSONToCSVConvertor</code>方法修改一下，让它只返回CSV数据直接传到后端，后端接收到数据后经过如下操作把文件返回，实现下载<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> download() &#123;</span><br><span class="line">  <span class="keyword">const</span> filePath = path.resolve(<span class="keyword">this</span>.app.config.static.dir, <span class="string">'hello.txt'</span>);</span><br><span class="line">  <span class="keyword">this</span>.ctx.attachment(<span class="string">'hello.txt'</span>);</span><br><span class="line">  <span class="keyword">this</span>.ctx.set(<span class="string">'Content-Type'</span>, <span class="string">'application/octet-stream'</span>);</span><br><span class="line">  <span class="keyword">this</span>.ctx.body = fs.createReadStream(filePath);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://blogs.pipi0127.top/2018/05/31/数据导出与下载/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://blogs.pipi0127.top/2018/05/31/数据导出与下载/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        Copyright 版权 start
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
